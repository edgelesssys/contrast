"use strict";(globalThis.webpackChunkcontrast_docs=globalThis.webpackChunkcontrast_docs||[]).push([[840],{28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>s});var o=n(96540);const i={},r=o.createContext(i);function a(e){const t=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(r.Provider,{value:t},e.children)}},35020:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>l,frontMatter:()=>a,metadata:()=>o,toc:()=>h});const o=JSON.parse('{"id":"howto/manifest-update","title":"Manifest update","description":"This section guides you through the process of updating a manifest at the Contrast Coordinator.","source":"@site/docs/howto/manifest-update.md","sourceDirName":"howto","slug":"/howto/manifest-update","permalink":"/contrast/pr-preview/pr-1933/next/howto/manifest-update","draft":false,"unlisted":false,"editUrl":"https://github.com/edgelesssys/contrast/edit/main/docs/docs/howto/manifest-update.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Observability","permalink":"/contrast/pr-preview/pr-1933/next/howto/observability"},"next":{"title":"Coordinator high-availability","permalink":"/contrast/pr-preview/pr-1933/next/howto/coordinator-ha"}}');var i=n(74848),r=n(28453);const a={},s="Manifest update",c={},h=[{value:"Applicability",id:"applicability",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"How-to",id:"how-to",level:2},{value:"Rolling out the update",id:"rolling-out-the-update",level:3}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"manifest-update",children:"Manifest update"})}),"\n",(0,i.jsx)(t.p,{children:"This section guides you through the process of updating a manifest at the Contrast Coordinator."}),"\n",(0,i.jsx)(t.h2,{id:"applicability",children:"Applicability"}),"\n",(0,i.jsx)(t.p,{children:"If the manifest changes, for example, due to modifications in the service mesh configuration, it must be updated at the Coordinator."}),"\n",(0,i.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:"A running Contrast deployment"}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"/contrast/pr-preview/pr-1933/next/howto/workload-deployment/connect-to-coordinator",children:"Connect to the Coordinator"})}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"how-to",children:"How-to"}),"\n",(0,i.jsx)(t.p,{children:"Set the changed manifest at the Coordinator with:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sh",children:'contrast set -c "${coordinator}:1313" resources/\n'})}),"\n",(0,i.jsxs)(t.p,{children:["The Contrast Coordinator will rotate the mesh ca certificate on the manifest update. Workload certificates issued\nafter the manifest update are thus issued by another certificate authority and services receiving the new CA certificate chain\nwon't trust parts of the deployment that got their certificate issued before the update. This way, Contrast ensures\nthat parts of the deployment that received a security update won't be infected by parts of the deployment at an older\npatch level that may have been compromised. The ",(0,i.jsx)(t.code,{children:"mesh-ca.pem"})," is updated with the new CA certificate chain."]}),"\n",(0,i.jsx)(t.h3,{id:"rolling-out-the-update",children:"Rolling out the update"}),"\n",(0,i.jsx)(t.p,{children:"The Coordinator has the new manifest set, but the different containers of the app are still\nusing the older certificate authority. The Contrast Initializer terminates after the initial attestation\nflow and won't pull new certificates on manifest updates."}),"\n",(0,i.jsx)(t.p,{children:"To roll out the update, use:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-sh",children:"kubectl rollout restart <resource>\n"})}),"\n",(0,i.jsx)(t.p,{children:"for all your application resources."})]})}function l(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);