<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.12 docs-doc-page docs-doc-id-architecture/components/service-mesh" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Service mesh | Contrast</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.edgeless.systems/contrast/pr-preview/pr-2150/1.12/architecture/components/service-mesh"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.12"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.12"><meta data-rh="true" name="docsearch:version" content="1.12"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.12"><meta data-rh="true" property="og:title" content="Service mesh | Contrast"><meta data-rh="true" name="description" content="The Contrast service mesh secures the communication of the workload by automatically"><meta data-rh="true" property="og:description" content="The Contrast service mesh secures the communication of the workload by automatically"><link data-rh="true" rel="icon" href="/contrast/pr-preview/pr-2150/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.edgeless.systems/contrast/pr-preview/pr-2150/1.12/architecture/components/service-mesh"><link data-rh="true" rel="alternate" href="https://docs.edgeless.systems/contrast/pr-preview/pr-2150/1.12/architecture/components/service-mesh" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.edgeless.systems/contrast/pr-preview/pr-2150/1.12/architecture/components/service-mesh" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Service mesh","item":"https://docs.edgeless.systems/contrast/pr-preview/pr-2150/1.12/architecture/components/service-mesh"}]}</script><script src="/contrast/gtagman.js" async data-cookieconsent="ignore"></script><link rel="stylesheet" href="/contrast/pr-preview/pr-2150/assets/css/styles.979edda2.css">
<script src="/contrast/pr-preview/pr-2150/assets/js/runtime~main.05f09948.js" defer="defer"></script>
<script src="/contrast/pr-preview/pr-2150/assets/js/main.884c668d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/contrast/pr-preview/pr-2150/img/logos/contrast_icon.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/contrast/pr-preview/pr-2150/"><div class="navbar__logo"><img src="/contrast/pr-preview/pr-2150/img/logos/contrast_icon.svg" alt="Contrast Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/contrast/pr-preview/pr-2150/img/logos/contrast_icon.svg" alt="Contrast Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/service-mesh">1.12</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/next/architecture/components/service-mesh">Next</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/architecture/components/service-mesh">1.16</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.15/architecture/components/service-mesh">1.15</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.14/architecture/components/service-mesh">1.14</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.13/architecture/components/service-mesh">1.13</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/service-mesh">1.12</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.11/architecture/components/service-mesh">1.11</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.10">1.10</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.9">1.9</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.8">1.8</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.7">1.7</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.6">1.6</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.5">1.5</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.4">1.4</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.3">1.3</a></li></ul></div><a href="https://github.com/edgelesssys/contrast" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-1.12"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/contrast/pr-preview/pr-2150/1.12"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/contrast/pr-preview/pr-2150/1.12/getting-started/overview"><span title="Getting started" class="categoryLinkLabel_W154">Getting started</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/getting-started/overview"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/getting-started/deployment"><span title="Workload deployment" class="linkLabel_WmDU">Workload deployment</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/contrast/pr-preview/pr-2150/1.12/howto/cluster-setup/bare-metal"><span title="How-to" class="categoryLinkLabel_W154">How-to</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/cluster-setup/bare-metal"><span title="Cluster setup" class="categoryLinkLabel_W154">Cluster setup</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/install-cli"><span title="Install CLI" class="linkLabel_WmDU">Install CLI</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/workload-deployment/runtime-deployment"><span title="Workload deployment" class="categoryLinkLabel_W154">Workload deployment</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/encrypted-storage"><span title="Set up encrypted volumes" class="linkLabel_WmDU">Set up encrypted volumes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/hardening"><span title="Hardening" class="linkLabel_WmDU">Hardening</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/logging"><span title="Logging" class="linkLabel_WmDU">Logging</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/observability"><span title="Observability" class="linkLabel_WmDU">Observability</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/manifest-update"><span title="Manifest update" class="linkLabel_WmDU">Manifest update</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/coordinator-ha"><span title="Coordinator high-availability" class="linkLabel_WmDU">Coordinator high-availability</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/vault"><span title="Vault" class="linkLabel_WmDU">Vault</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/troubleshooting"><span title="Troubleshooting" class="linkLabel_WmDU">Troubleshooting</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/contrast/pr-preview/pr-2150/1.12/security"><span title="Security" class="linkLabel_WmDU">Security</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/contrast/pr-preview/pr-2150/1.12/architecture/overview"><span title="Architecture" class="categoryLinkLabel_W154">Architecture</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/overview"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/runtime"><span title="Components" class="categoryLinkLabel_W154">Components</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/runtime"><span title="Runtime" class="linkLabel_WmDU">Runtime</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/policies"><span title="Policies" class="linkLabel_WmDU">Policies</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/initializer"><span title="Initializer" class="linkLabel_WmDU">Initializer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/coordinator"><span title="Coordinator" class="linkLabel_WmDU">Coordinator</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/service-mesh"><span title="Service mesh" class="linkLabel_WmDU">Service mesh</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/attestation/overview"><span title="Attestation" class="categoryLinkLabel_W154">Attestation</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/secrets"><span title="Secrets &amp; recovery" class="linkLabel_WmDU">Secrets &amp; recovery</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/features-limitations"><span title="Features &amp; limitations" class="linkLabel_WmDU">Features &amp; limitations</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/telemetry"><span title="Telemetry &amp; data collection" class="linkLabel_WmDU">Telemetry &amp; data collection</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Contrast<!-- --> <b>1.12</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/contrast/pr-preview/pr-2150/architecture/components/service-mesh">latest version</a></b> (<!-- -->1.16<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/contrast/pr-preview/pr-2150/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Architecture</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Components</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Service mesh</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.12</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Service mesh</h1></header>
<p>The Contrast service mesh secures the communication of the workload by automatically
wrapping the network traffic inside mutual TLS (mTLS) connections. The
verification of the endpoints in the connection establishment is based on
certificates that are part of the
<a href="#public-key-infrastructure" class="">PKI of the Coordinator</a>.</p>
<p>The service mesh can be enabled on a per-workload basis by adding a service mesh
configuration to the workload&#x27;s object annotations. During the <code>contrast generate</code>
step, the service mesh is added as a <a href="https://kubernetes.io/docs/concepts/workloads/pods/sidecar-containers/" target="_blank" rel="noopener noreferrer" class="">sidecar
container</a> to
all workloads which have a specified configuration. The service mesh container first
sets up <code>iptables</code> rules based on its configuration and then starts
<a href="https://www.envoyproxy.io/" target="_blank" rel="noopener noreferrer" class="">Envoy</a> for TLS origination and termination.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="service-mesh-startup-enforcement">Service mesh startup enforcement<a href="#service-mesh-startup-enforcement" class="hash-link" aria-label="Direct link to Service mesh startup enforcement" title="Direct link to Service mesh startup enforcement" translate="no">​</a></h2>
<p>Since Contrast doesn&#x27;t yet enforce the order in which the containers are started
(see <a class="" href="/contrast/pr-preview/pr-2150/1.12/architecture/features-limitations">Limitations</a>), we deny all incoming connections
until the service mesh is fully configured.
A systemd unit inside the podVM creates this deny rule.
The kata-agent systemd unit requires that this unit successfully runs and exits,
before itself it can be started.
Therefore, the deny rule is in place before any containers can be started.</p>
<p>If the user specifies no service mesh annotations, the Initializer takes care
of removing the deny rule.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="configuring-the-proxy">Configuring the proxy<a href="#configuring-the-proxy" class="hash-link" aria-label="Direct link to Configuring the proxy" title="Direct link to Configuring the proxy" translate="no">​</a></h2>
<p>The service mesh container can be configured using the following object annotations:</p>
<ul>
<li class=""><code>contrast.edgeless.systems/servicemesh-ingress</code> to configure ingress.</li>
<li class=""><code>contrast.edgeless.systems/servicemesh-egress</code> to configure egress.</li>
<li class=""><code>contrast.edgeless.systems/servicemesh-admin-interface-port</code> to configure the Envoy
admin interface. If not specified, no admin interface will be started.</li>
</ul>
<p>If you aren&#x27;t using the automatic service mesh injection and want to configure the
service mesh manually, set the environment variables <code>CONTRAST_INGRESS_PROXY_CONFIG</code>,
<code>CONTRAST_EGRESS_PROXY_CONFIG</code> and <code>CONTRAST_ADMIN_PORT</code> in the service mesh sidecar directly.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="ingress">Ingress<a href="#ingress" class="hash-link" aria-label="Direct link to Ingress" title="Direct link to Ingress" translate="no">​</a></h3>
<p>All TCP ingress traffic is routed over Envoy by default. Since we use
<a href="https://docs.kernel.org/networking/tproxy.html" target="_blank" rel="noopener noreferrer" class="">TPROXY</a>, the destination address
remains the same throughout the packet handling.</p>
<p>Any incoming connection is required to present a client certificate signed by the
<a href="#summary-of-certificate-roles" class="">mesh CA certificate</a>.
Envoy presents a certificate chain of the mesh
certificate of the workload and the intermediate CA certificate as the server certificate.</p>
<p>If the deployment contains workloads which should be reachable from outside the
Service Mesh, while still handing out the certificate chain, disable client
authentication by setting the annotation <code>contrast.edgeless.systems/servicemesh-ingress</code> as
<code>&lt;name&gt;#&lt;port&gt;#false</code>. Separate multiple entries with <code>##</code>. You can choose any
descriptive string identifying the service on the given port for the <code>&lt;name&gt;</code> field,
as it&#x27;s only informational.</p>
<p>Disable redirection and TLS termination altogether by specifying
<code>&lt;name&gt;#&lt;port&gt;#true</code>. This can be beneficial if the workload itself handles TLS
on that port or if the information exposed on this port is non-sensitive.</p>
<p>The following example workload exposes a web service on port 8080 and metrics on
port 7890. The web server is exposed to a 3rd party end-user which wants to
verify the deployment, therefore it&#x27;s still required that the server hands out
it certificate chain signed by the mesh CA certificate. The metrics should be
exposed via TCP without TLS.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">contrast.edgeless.systems/servicemesh-ingress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;web#8080#false##metrics#7890#true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">runtimeClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> contrast</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ghcr.io/edgelesssys/frontend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v1.2.3@</span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7890</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metrics</span><br></span></code></pre></div></div>
<p>When invoking <code>contrast generate</code>, the resulting deployment will be injected with the
Contrast service mesh as an init container:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runtimeClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> contrast</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">svc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ghcr.io/edgelesssys/frontend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v1.2.3@</span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7890</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">initContainers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CONTRAST_INGRESS_PROXY_CONFIG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;web#8080#false##metrics#7890#true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;ghcr.io/edgelesssys/contrast/service-mesh-proxy:v1.12.2@sha256:916db4ef5f000cd0f1411924f3e99804c48220f1c582ffffce79f54145c1f9c4&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> contrast</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">mesh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">restartPolicy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">securityContext</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">capabilities</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">add</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> NET_ADMIN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">privileged</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">volumeMounts</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> contrast</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">secrets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">mountPath</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> /contrast</span><br></span></code></pre></div></div>
<p>Note, that changing the environment variables of the sidecar container directly will
only have an effect if the workload isn&#x27;t configured to automatically generate a
service mesh component on <code>contrast generate</code>. Otherwise, the service mesh sidecar
container will be regenerated on every invocation of the command.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="egress">Egress<a href="#egress" class="hash-link" aria-label="Direct link to Egress" title="Direct link to Egress" translate="no">​</a></h3>
<p>To be able to route the egress traffic of the workload through Envoy, the remote
endpoints&#x27; IP address and port must be configurable.</p>
<ul>
<li class="">Choose an IP address inside the <code>127.0.0.0/8</code> CIDR and a port not yet in use
by the pod.</li>
<li class="">Configure the workload to connect to this IP address and port.</li>
<li class="">Set <code>&lt;name&gt;#&lt;chosen IP&gt;:&lt;chosen port&gt;#&lt;original-hostname-or-ip&gt;:&lt;original-port&gt;</code>
as the <code>contrast.edgeless.systems/servicemesh-egress</code> workload annotation. Separate multiple
entries with <code>##</code>. Choose any string identifying the service on the given port as
<code>&lt;name&gt;</code>.</li>
</ul>
<p>This redirects the traffic over Envoy. The endpoint must present a valid
certificate chain which must be verifiable with the
<a href="#summary-of-certificate-roles" class="">mesh CA certificate</a>.
Furthermore, Envoy uses a certificate chain with the mesh certificate of the workload
and the intermediate CA certificate as the client certificate.</p>
<p>The following example workload has no ingress connections and two egress
connection to different microservices. The microservices are part
of the confidential deployment. One is reachable under <code>billing-svc:8080</code> and
the other under <code>cart-svc:8080</code>.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">annotations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">contrast.edgeless.systems/servicemesh-egress</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;billing#127.137.0.1:8081#billing-svc:8080##cart#127.137.0.2:8081#cart-svc:8080&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">runtimeClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> contrast</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> currency</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">conversion</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ghcr.io/edgelesssys/conversion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v1.2.3@</span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="public-key-infrastructure">Public key Infrastructure<a href="#public-key-infrastructure" class="hash-link" aria-label="Direct link to Public key Infrastructure" title="Direct link to Public key Infrastructure" translate="no">​</a></h2>
<p>The Coordinator establishes a public key infrastructure (PKI) for all workloads defined in the manifest. It holds three types of certificates:</p>
<ul>
<li class=""><strong>Root CA certificate</strong>: A long-lived certificate used to sign the intermediate CA certificate.</li>
<li class=""><strong>Intermediate CA certificate</strong>: Shares a private key with the mesh CA certificate and is signed by the root CA. This private key is used to sign mesh certificates.</li>
<li class=""><strong>Mesh CA certificate</strong>: Used to sign workload-specific mesh certificates.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="PKI certificate chain" src="/contrast/pr-preview/pr-2150/assets/images/contrast_pki.drawio-a2442a1eeb081612c5ad587a58589ad4.svg" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="certificate-issuance">Certificate issuance<a href="#certificate-issuance" class="hash-link" aria-label="Direct link to Certificate issuance" title="Direct link to Certificate issuance" translate="no">​</a></h3>
<p>Once a workload pod’s attestation is successfully verified by the Coordinator, it receives:</p>
<ul>
<li class="">A <strong>mesh certificate</strong></li>
<li class="">The <strong>mesh CA certificate</strong></li>
</ul>
<p>The mesh certificate includes X.509 extensions based on the workload’s attestation document and can be used as a client or server certificate in TLS connections. It proves to the remote party that the workload was verified by the Coordinator. The remote party can verify the mesh certificate using the mesh CA certificate.</p>
<p>While developers may use these certificates independently, they&#x27;re also automatically used by Contrast’s service mesh for secure communication.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="certificate-rotation">Certificate rotation<a href="#certificate-rotation" class="hash-link" aria-label="Direct link to Certificate rotation" title="Direct link to Certificate rotation" translate="no">​</a></h3>
<p>Every time the manifest is updated, the Coordinator rotates the intermediate private key. As a result, both the intermediate CA certificate and the mesh CA certificate are renewed.</p>
<p>This mechanism protects against scenarios where a workload owner introduces unauthorized containers after verification. If a user doesn&#x27;t trust the workload owner, they should only trust mesh certificates signed by the mesh CA certificate obtained during their own verification process.</p>
<p>Similarly, the service mesh uses the mesh CA certificate issued when the workload was verified. Any change to the manifest requires a new rollout of the services, as the mesh CA certificate will change.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="service-mesh-integration">Service mesh integration<a href="#service-mesh-integration" class="hash-link" aria-label="Direct link to Service mesh integration" title="Direct link to Service mesh integration" translate="no">​</a></h3>
<p>The service mesh relies on the mesh certificates to establish mutual TLS (mTLS) connections between workloads.</p>
<ul>
<li class="">During pod startup, the Initializer requests a mesh certificate from the Coordinator.</li>
<li class="">If attestation is successful, the Coordinator returns a mesh certificate and the mesh CA certificate.</li>
<li class="">These certificates are used to authenticate and authorize communication within the service mesh.</li>
</ul>
<p>Only workloads that have been verified based on the current manifest and signed by the corresponding mesh CA certificate are trusted by other services in the mesh.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="summary-of-certificate-roles">Summary of certificate roles<a href="#summary-of-certificate-roles" class="hash-link" aria-label="Direct link to Summary of certificate roles" title="Direct link to Summary of certificate roles" translate="no">​</a></h3>
<ul>
<li class="">
<p><strong>Root CA Certificate</strong>
Returned during Coordinator verification. Can be used to verify mesh certificates if the data owner fully trusts all future manifests and updates.</p>
</li>
<li class="">
<p><strong>Intermediate CA Certificate</strong>
Links the root CA to the mesh CA. Included in certificate chains for validation purposes.</p>
</li>
<li class="">
<p><strong>Mesh CA Certificate</strong>
Used to verify mesh certificates. Bound to a specific manifest version and changes when the manifest is updated.</p>
</li>
<li class="">
<p><strong>Mesh Certificate</strong>
Issued to workloads after successful attestation. Contains metadata from the attestation document and is used in mTLS communication within the service mesh.</p>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/edgelesssys/contrast/edit/main/docs/versioned_docs/version-1.12/architecture/components/service-mesh.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/coordinator"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Coordinator</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/contrast/pr-preview/pr-2150/1.12/architecture/attestation/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#service-mesh-startup-enforcement" class="table-of-contents__link toc-highlight">Service mesh startup enforcement</a></li><li><a href="#configuring-the-proxy" class="table-of-contents__link toc-highlight">Configuring the proxy</a><ul><li><a href="#ingress" class="table-of-contents__link toc-highlight">Ingress</a></li><li><a href="#egress" class="table-of-contents__link toc-highlight">Egress</a></li></ul></li><li><a href="#public-key-infrastructure" class="table-of-contents__link toc-highlight">Public key Infrastructure</a><ul><li><a href="#certificate-issuance" class="table-of-contents__link toc-highlight">Certificate issuance</a></li><li><a href="#certificate-rotation" class="table-of-contents__link toc-highlight">Certificate rotation</a></li><li><a href="#service-mesh-integration" class="table-of-contents__link toc-highlight">Service mesh integration</a></li><li><a href="#summary-of-certificate-roles" class="table-of-contents__link toc-highlight">Summary of certificate roles</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.edgeless.systems/#footer-id" target="_blank" rel="noopener noreferrer" class="footer__link-item">Newsletter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.edgeless.systems/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/EdgelessSystems" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/edgeless-systems/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCOOInN0sCv6icUesisYIDeA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.edgeless.systems/imprint/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.edgeless.systems/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="javascript: Cookiebot.renew()" class="footer__link-item">Cookie Settings</a></li><li class="footer__item"><a href="https://www.edgeless.systems/contact-us/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Edgeless Systems</div></div></div></footer></div>
</body>
</html>