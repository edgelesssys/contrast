<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.12 docs-doc-page docs-doc-id-architecture/components/coordinator" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">The Contrast Coordinator | Contrast</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.edgeless.systems/contrast/pr-preview/pr-2150/1.12/architecture/components/coordinator"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.12"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.12"><meta data-rh="true" name="docsearch:version" content="1.12"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.12"><meta data-rh="true" property="og:title" content="The Contrast Coordinator | Contrast"><meta data-rh="true" name="description" content="The Contrast Coordinator is the central remote attestation service of a Contrast deployment."><meta data-rh="true" property="og:description" content="The Contrast Coordinator is the central remote attestation service of a Contrast deployment."><link data-rh="true" rel="icon" href="/contrast/pr-preview/pr-2150/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.edgeless.systems/contrast/pr-preview/pr-2150/1.12/architecture/components/coordinator"><link data-rh="true" rel="alternate" href="https://docs.edgeless.systems/contrast/pr-preview/pr-2150/1.12/architecture/components/coordinator" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.edgeless.systems/contrast/pr-preview/pr-2150/1.12/architecture/components/coordinator" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Coordinator","item":"https://docs.edgeless.systems/contrast/pr-preview/pr-2150/1.12/architecture/components/coordinator"}]}</script><script src="/contrast/gtagman.js" async data-cookieconsent="ignore"></script><link rel="stylesheet" href="/contrast/pr-preview/pr-2150/assets/css/styles.979edda2.css">
<script src="/contrast/pr-preview/pr-2150/assets/js/runtime~main.71012ae9.js" defer="defer"></script>
<script src="/contrast/pr-preview/pr-2150/assets/js/main.884c668d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/contrast/pr-preview/pr-2150/img/logos/contrast_icon.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/contrast/pr-preview/pr-2150/"><div class="navbar__logo"><img src="/contrast/pr-preview/pr-2150/img/logos/contrast_icon.svg" alt="Contrast Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/contrast/pr-preview/pr-2150/img/logos/contrast_icon.svg" alt="Contrast Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/coordinator">1.12</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/next/architecture/components/coordinator">Next</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/architecture/components/coordinator">1.16</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.15/architecture/components/coordinator">1.15</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.14/architecture/components/coordinator">1.14</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.13/architecture/components/coordinator">1.13</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/coordinator">1.12</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.11/architecture/components/coordinator">1.11</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.10">1.10</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.9">1.9</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.8">1.8</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.7">1.7</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.6">1.6</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.5">1.5</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.4">1.4</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2150/1.3">1.3</a></li></ul></div><a href="https://github.com/edgelesssys/contrast" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-1.12"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/contrast/pr-preview/pr-2150/1.12"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/contrast/pr-preview/pr-2150/1.12/getting-started/overview"><span title="Getting started" class="categoryLinkLabel_W154">Getting started</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/getting-started/overview"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/getting-started/deployment"><span title="Workload deployment" class="linkLabel_WmDU">Workload deployment</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/contrast/pr-preview/pr-2150/1.12/howto/cluster-setup/bare-metal"><span title="How-to" class="categoryLinkLabel_W154">How-to</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/cluster-setup/bare-metal"><span title="Cluster setup" class="categoryLinkLabel_W154">Cluster setup</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/install-cli"><span title="Install CLI" class="linkLabel_WmDU">Install CLI</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/workload-deployment/runtime-deployment"><span title="Workload deployment" class="categoryLinkLabel_W154">Workload deployment</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/encrypted-storage"><span title="Set up encrypted volumes" class="linkLabel_WmDU">Set up encrypted volumes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/hardening"><span title="Hardening" class="linkLabel_WmDU">Hardening</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/logging"><span title="Logging" class="linkLabel_WmDU">Logging</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/observability"><span title="Observability" class="linkLabel_WmDU">Observability</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/manifest-update"><span title="Manifest update" class="linkLabel_WmDU">Manifest update</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/coordinator-ha"><span title="Coordinator high-availability" class="linkLabel_WmDU">Coordinator high-availability</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/vault"><span title="Vault" class="linkLabel_WmDU">Vault</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/howto/troubleshooting"><span title="Troubleshooting" class="linkLabel_WmDU">Troubleshooting</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/contrast/pr-preview/pr-2150/1.12/security"><span title="Security" class="linkLabel_WmDU">Security</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/contrast/pr-preview/pr-2150/1.12/architecture/overview"><span title="Architecture" class="categoryLinkLabel_W154">Architecture</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/overview"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/runtime"><span title="Components" class="categoryLinkLabel_W154">Components</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/runtime"><span title="Runtime" class="linkLabel_WmDU">Runtime</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/policies"><span title="Policies" class="linkLabel_WmDU">Policies</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/initializer"><span title="Initializer" class="linkLabel_WmDU">Initializer</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/coordinator"><span title="Coordinator" class="linkLabel_WmDU">Coordinator</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/service-mesh"><span title="Service mesh" class="linkLabel_WmDU">Service mesh</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/attestation/overview"><span title="Attestation" class="categoryLinkLabel_W154">Attestation</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/secrets"><span title="Secrets &amp; recovery" class="linkLabel_WmDU">Secrets &amp; recovery</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/features-limitations"><span title="Features &amp; limitations" class="linkLabel_WmDU">Features &amp; limitations</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2150/1.12/architecture/telemetry"><span title="Telemetry &amp; data collection" class="linkLabel_WmDU">Telemetry &amp; data collection</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Contrast<!-- --> <b>1.12</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/contrast/pr-preview/pr-2150/architecture/components/coordinator">latest version</a></b> (<!-- -->1.16<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/contrast/pr-preview/pr-2150/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Architecture</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Components</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Coordinator</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.12</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>The Contrast Coordinator</h1></header>
<p>The Contrast Coordinator is the central remote attestation service of a Contrast deployment.
It runs inside a confidential container inside your cluster.
The Coordinator can be verified via remote attestation, and a Contrast deployment is self-contained.
The Coordinator is configured with a <em>manifest</em>, a configuration file containing the reference attestation values of your deployment.
It ensures that your deployment&#x27;s topology adheres to your specified manifest by verifying the identity and integrity of all confidential pods inside the deployment.
The Coordinator is also a certificate authority and issues certificates for your workload pods during the attestation procedure.
Your workload pods can establish secure, encrypted communication channels between themselves based on these certificates using the Coordinator as the root CA.
As your app needs to scale, the Coordinator transparently verifies new instances and then provides them with their certificates to join the deployment.</p>
<p>To verify your deployment, the Coordinator&#x27;s remote attestation statement combined with the manifest offers a concise single remote attestation statement for your entire deployment.
A third party can use this to verify the integrity of your distributed app, making it easy to assure stakeholders of your app&#x27;s identity and integrity.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="the-manifest">The Manifest<a href="#the-manifest" class="hash-link" aria-label="Direct link to The Manifest" title="Direct link to The Manifest" translate="no">​</a></h2>
<p>The manifest is the configuration file for the Coordinator, defining your confidential deployment.
It&#x27;s automatically generated from your deployment by the Contrast CLI.
It currently consists of the following parts:</p>
<ul>
<li class=""><em>Policies</em>: The identities of your Pods, represented by the hashes of their respective runtime policies.</li>
<li class=""><em>Reference Values</em>: The remote attestation reference values for the Kata confidential micro-VM that&#x27;s the runtime environment of your Pods.</li>
<li class=""><em>WorkloadOwnerKeyDigest</em>: The workload owner&#x27;s public key digest. Used for authenticating subsequent manifest updates.</li>
<li class=""><em>SeedshareOwnerKeys</em>: public keys of seed share owners. Used to authenticate user recovery and permission to handle the secret seed.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="manifest-history">Manifest history<a href="#manifest-history" class="hash-link" aria-label="Direct link to Manifest history" title="Direct link to Manifest history" translate="no">​</a></h2>
<p>The Coordinator uses Kubernetes <code>ConfigMap</code>s to store the manifest history and associated runtime policies.
Manifest and policies aren&#x27;t considered sensitive information, because it needs to be passed to the untrusted infrastructure in order to start workloads.
However, the Coordinator must ensure its integrity and that the persisted data corresponds to the manifests set by authorized users.
This is accomplished with two types of integrity checks.</p>
<p>The manifest that&#x27;s currently enforced by the Coordinator is called the <em>latest manifest</em>, stored in a <code>ConfigMap</code> with a fixed name and signed with a key derived from the <a class="" href="/contrast/pr-preview/pr-2150/1.12/architecture/secrets">secret seed</a>.
The signed object contains references to the manifest content and the previous manifest.</p>
<p>All history content other than the latest manifest reference is content-addressable with SHA-256 hashes.
For example, a manifest with hash <code>a591a6d40bf420404a011733cfb7b190d62c65bf0bcda190f4b2428b8f8c5e4c</code> is stored in a <code>ConfigMap</code> named <code>contrast-store-manifest-a591a6d40bf420404a011733cfb7b190d62c65bf0bcda190f4b2428b8f8c5e4c</code>.
Starting from the signed latest manifest, the Coordinator retrieves all referenced content by hash and verifies that the content hashes match.
The entire manifest history thus forms a Merkle tree, chaining back to the signed latest manifest.</p>
<p>The <code>ConfigMap</code>s used to store manifests and policies are owned by the Contrast Coordinator <code>StatefulSet</code>.
When that resource is removed from the cluster, the history will be removed with it.
If you need to clear the history without removing the Coordinator, you can do so with the following command:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl delete configmap </span><span class="token parameter variable" style="color:#36acaa">--selector</span><span class="token plain"> app.kubernetes.io/managed-by</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">contrast.edgeless.systems</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="state">State<a href="#state" class="hash-link" aria-label="Direct link to State" title="Direct link to State" translate="no">​</a></h2>
<p>A Contrast Coordinator can be in one of three states:</p>
<ul>
<li class="">After a fresh installation, there is no manifest history and the Coordinator waits for its initialization by <code>contrast set</code>.</li>
<li class="">When the Coordinator starts up and finds an existing manifest history, it enters <em>recovery mode</em>.
It periodically tries to recover from its peers, or waits for the user to run <code>contrast recover</code> if there are none.
All other API requests fail as long as the Coordinator is in recovery mode.</li>
<li class="">If the Coordinator is synchronized to the latest manifest in history, it transitions to the <code>Ready</code> state and starts accepting requests from workload initializers.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="services">Services<a href="#services" class="hash-link" aria-label="Direct link to Services" title="Direct link to Services" translate="no">​</a></h2>
<p>The Contrast Coordinator comes with two services: <code>coordinator</code> and <code>coordinator-ready</code>.
The <code>coordinator</code> service is backed by all Coordinators, ready or not ready, and is intended to serve user API (that is, <code>contrast</code> CLI commands).
The <code>coordinator-ready</code> service only selects ready Coordinators which can serve the mesh API, and is intended to be used by initializers.
This endpoint is also suitable for verifying clients, since they will only get a successful response from a ready Coordinator.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="recovery">Recovery<a href="#recovery" class="hash-link" aria-label="Direct link to Recovery" title="Direct link to Recovery" translate="no">​</a></h2>
<p>When a Coordinator starts up, it doesn&#x27;t have access to the signing secret and can thus not verify the integrity of the persisted latest manifest.
It needs to be provided with the secret seed, from which it can derive the signing key that verifies the signature.
This procedure is called user recovery and is initiated by the seed share owner.
The CLI decrypts the secret seed using the private seed share owner key, verifies the Coordinator and sends the seed through the <code>Recover</code> method.
The Coordinator authenticates the seed share owner, recovers its key material, and verifies the manifest history signature.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="peer-recovery">Automatic recovery and high availability<a href="#peer-recovery" class="hash-link" aria-label="Direct link to Automatic recovery and high availability" title="Direct link to Automatic recovery and high availability" translate="no">​</a></h2>
<p>The Contrast Coordinator is deployed as a single replica in its default configuration.
When this replica is restarted, for example for node maintenance, it needs to be recovered manually.
This can be avoided by running multiple replicas of the Coordinator, allowing the Coordinators to recover their peers automatically.</p>
<p>Newly started (or restarted) Coordinator instances discover ready peers using the Kubernetes API server.
If a manifest history exists in the cluster and the Coordinator isn&#x27;t updated yet to the latest manifest, it stays in a recovery loop.
For each ready Coordinator peer, it tries to reach that peer&#x27;s mesh API endpoint directly (using the pod IP), attest to that Coordinator and receive the secret seed and the mesh CA credentials.</p>
<p>As long as a single Coordinator is initialized, the other instances will eventually recover from it.
<code>StatefulSet</code> semantics guarantee that Coordinator pods are started predictably, and only after all existing Coordinators are ready.
For automatic peer recovery and high-availability, the Coordinator should be <a class="" href="/contrast/pr-preview/pr-2150/1.12/howto/coordinator-ha">scaled to at least 3 replicas</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/edgelesssys/contrast/edit/main/docs/versioned_docs/version-1.12/architecture/components/coordinator.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/initializer"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Initializer</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/contrast/pr-preview/pr-2150/1.12/architecture/components/service-mesh"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Service mesh</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-manifest" class="table-of-contents__link toc-highlight">The Manifest</a></li><li><a href="#manifest-history" class="table-of-contents__link toc-highlight">Manifest history</a></li><li><a href="#state" class="table-of-contents__link toc-highlight">State</a></li><li><a href="#services" class="table-of-contents__link toc-highlight">Services</a></li><li><a href="#recovery" class="table-of-contents__link toc-highlight">Recovery</a></li><li><a href="#peer-recovery" class="table-of-contents__link toc-highlight">Automatic recovery and high availability</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.edgeless.systems/#footer-id" target="_blank" rel="noopener noreferrer" class="footer__link-item">Newsletter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.edgeless.systems/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/EdgelessSystems" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/edgeless-systems/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCOOInN0sCv6icUesisYIDeA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.edgeless.systems/imprint/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.edgeless.systems/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="javascript: Cookiebot.renew()" class="footer__link-item">Cookie Settings</a></li><li class="footer__item"><a href="https://www.edgeless.systems/contact-us/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Edgeless Systems</div></div></div></footer></div>
</body>
</html>