<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-howto/registry-authentication" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Registry authentication | Contrast</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.edgeless.systems/contrast/pr-preview/pr-2192/next/howto/registry-authentication"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Registry authentication | Contrast"><meta data-rh="true" name="description" content="This guide shows how to set up registry credentials for Contrast."><meta data-rh="true" property="og:description" content="This guide shows how to set up registry credentials for Contrast."><link data-rh="true" rel="icon" href="/contrast/pr-preview/pr-2192/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.edgeless.systems/contrast/pr-preview/pr-2192/next/howto/registry-authentication"><link data-rh="true" rel="alternate" href="https://docs.edgeless.systems/contrast/pr-preview/pr-2192/next/howto/registry-authentication" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.edgeless.systems/contrast/pr-preview/pr-2192/next/howto/registry-authentication" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Registry authentication","item":"https://docs.edgeless.systems/contrast/pr-preview/pr-2192/next/howto/registry-authentication"}]}</script><script src="/contrast/gtagman.js" async data-cookieconsent="ignore"></script><link rel="stylesheet" href="/contrast/pr-preview/pr-2192/assets/css/styles.979edda2.css">
<script src="/contrast/pr-preview/pr-2192/assets/js/runtime~main.beb3d5ed.js" defer="defer"></script>
<script src="/contrast/pr-preview/pr-2192/assets/js/main.1dd4209f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/contrast/pr-preview/pr-2192/img/logos/contrast_icon.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/contrast/pr-preview/pr-2192/"><div class="navbar__logo"><img src="/contrast/pr-preview/pr-2192/img/logos/contrast_icon.svg" alt="Contrast Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/contrast/pr-preview/pr-2192/img/logos/contrast_icon.svg" alt="Contrast Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/contrast/pr-preview/pr-2192/next/howto/registry-authentication">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/contrast/pr-preview/pr-2192/next/howto/registry-authentication">Next</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2192/howto/registry-authentication">1.16</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2192/1.15/howto/registry-authentication">1.15</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2192/1.14/howto/registry-authentication">1.14</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2192/1.13/howto/registry-authentication">1.13</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2192/1.12/howto/registry-authentication">1.12</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2192/1.11/howto/registry-authentication">1.11</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2192/1.10/howto/registry-authentication">1.10</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2192/1.9/howto/registry-authentication">1.9</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2192/1.8/howto/registry-authentication">1.8</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2192/1.7/howto/registry-authentication">1.7</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2192/1.6">1.6</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2192/1.5">1.5</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2192/1.4">1.4</a></li><li><a class="dropdown__link" href="/contrast/pr-preview/pr-2192/1.3">1.3</a></li></ul></div><a href="https://github.com/edgelesssys/contrast" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/contrast/pr-preview/pr-2192/next"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/contrast/pr-preview/pr-2192/next/getting-started/overview"><span title="Getting started" class="categoryLinkLabel_W154">Getting started</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2192/next/getting-started/overview"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2192/next/getting-started/deployment"><span title="Workload deployment" class="linkLabel_WmDU">Workload deployment</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/contrast/pr-preview/pr-2192/next/howto/cluster-setup/bare-metal"><span title="How-to" class="categoryLinkLabel_W154">How-to</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/contrast/pr-preview/pr-2192/next/howto/cluster-setup/bare-metal"><span title="Cluster setup" class="categoryLinkLabel_W154">Cluster setup</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2192/next/howto/install-cli"><span title="Install CLI" class="linkLabel_WmDU">Install CLI</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/contrast/pr-preview/pr-2192/next/howto/workload-deployment/runtime-deployment"><span title="Workload deployment" class="categoryLinkLabel_W154">Workload deployment</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2192/next/howto/encrypted-storage"><span title="Set up encrypted volumes" class="linkLabel_WmDU">Set up encrypted volumes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2192/next/howto/hardening"><span title="Hardening" class="linkLabel_WmDU">Hardening</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2192/next/howto/logging"><span title="Logging" class="linkLabel_WmDU">Logging</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/contrast/pr-preview/pr-2192/next/howto/registry-authentication"><span title="Registry authentication" class="linkLabel_WmDU">Registry authentication</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2192/next/howto/observability"><span title="Observability" class="linkLabel_WmDU">Observability</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2192/next/howto/manifest-update"><span title="Manifest update" class="linkLabel_WmDU">Manifest update</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2192/next/howto/coordinator-ha"><span title="Coordinator high-availability" class="linkLabel_WmDU">Coordinator high-availability</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2192/next/howto/vault"><span title="Vault" class="linkLabel_WmDU">Vault</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2192/next/howto/secure-image-store"><span title="Secure image store" class="linkLabel_WmDU">Secure image store</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2192/next/howto/multi-runtime-class"><span title="Multi-runtime class" class="linkLabel_WmDU">Multi-runtime class</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2192/next/howto/immutable-deployments"><span title="Immutable deployments" class="linkLabel_WmDU">Immutable deployments</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2192/next/howto/troubleshooting"><span title="Troubleshooting" class="linkLabel_WmDU">Troubleshooting</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contrast/pr-preview/pr-2192/next/howto/debugshell"><span title="Advanced debugging" class="linkLabel_WmDU">Advanced debugging</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/contrast/pr-preview/pr-2192/next/security"><span title="Security" class="linkLabel_WmDU">Security</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/contrast/pr-preview/pr-2192/next/architecture/overview"><span title="Architecture" class="categoryLinkLabel_W154">Architecture</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/contrast/pr-preview/pr-2192/next/reference/node-installer-configuration"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Contrast<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/contrast/pr-preview/pr-2192/howto/registry-authentication">latest version</a></b> (<!-- -->1.16<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/contrast/pr-preview/pr-2192/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">How-to</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Registry authentication</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Registry authentication</h1></header>
<p>This guide shows how to set up registry credentials for Contrast.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="applicability">Applicability<a href="#applicability" class="hash-link" aria-label="Direct link to Applicability" title="Direct link to Applicability" translate="no">​</a></h2>
<p>This guide is relevant if you need to authenticate with a container registry for pulling images.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" translate="no">​</a></h2>
<ol>
<li class=""><a class="" href="/contrast/pr-preview/pr-2192/next/howto/cluster-setup/bare-metal">Set up cluster</a></li>
<li class=""><a class="" href="/contrast/pr-preview/pr-2192/next/howto/install-cli">Install CLI</a></li>
<li class=""><a class="" href="/contrast/pr-preview/pr-2192/next/howto/workload-deployment/runtime-deployment">Deploy the Contrast runtime</a></li>
<li class=""><a class="" href="/contrast/pr-preview/pr-2192/next/howto/workload-deployment/deployment-file-preparation">Prepare deployment files</a></li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-to">How-to<a href="#how-to" class="hash-link" aria-label="Direct link to How-to" title="Direct link to How-to" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="contrast-cli">Contrast CLI<a href="#contrast-cli" class="hash-link" aria-label="Direct link to Contrast CLI" title="Direct link to Contrast CLI" translate="no">​</a></h3>
<p>The Contrast CLI, specifically the <code>contrast generate</code> subcommand, needs access to the registry to derive policies for the referenced container images.
The CLI authenticates to the registry using the <a href="https://crates.io/crates/docker_credential" target="_blank" rel="noopener noreferrer" class=""><code>docker_credential</code></a> crate.
This crate searches some default locations for a registry authentication file, so it should find credentials created by <code>docker login</code> or <code>podman login</code>.</p>
<p>The only authentication method that&#x27;s currently supported is <code>Basic</code> HTTP authentication with user name and password (or personal access token).
Identity token flows, such as the default mechanism of plain <code>docker login</code>, don&#x27;t work.
Basic authentication can be forced with <code>docker login -u $REGISTRYUSER</code>.</p>
<p>You can override the credentials file used by Contrast by setting the environment variable <code>DOCKER_CONFIG</code>. This is useful for creating a credential file from scratch, as shown in the following script:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">registry</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&lt;put registry here&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">user</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&lt;put user id here&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">password</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&lt;put client secret here&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">DOCKER_CONFIG</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">mktemp</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${DOCKER_CONFIG}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        &quot;auths&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                &quot;</span><span class="token string variable" style="color:#36acaa">$registry</span><span class="token string" style="color:#e3116c">&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                        &quot;auth&quot;: &quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable builtin class-name" style="color:#36acaa">printf</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable string" style="color:#e3116c">&quot;%s:%s&quot;</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable string" style="color:#e3116c">&quot;</span><span class="token string variable string variable" style="color:#36acaa">$user</span><span class="token string variable string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable string" style="color:#e3116c">&quot;</span><span class="token string variable string variable" style="color:#36acaa">$password</span><span class="token string variable string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable operator" style="color:#393A34">|</span><span class="token string variable" style="color:#36acaa"> base64 </span><span class="token string variable parameter variable" style="color:#36acaa">-w0</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contrast generate </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$@</span><span class="token string" style="color:#e3116c">&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="confidential-guest-vms">Confidential guest VMs<a href="#confidential-guest-vms" class="hash-link" aria-label="Direct link to Confidential guest VMs" title="Direct link to Confidential guest VMs" translate="no">​</a></h3>
<p>For the <a class="" href="/contrast/pr-preview/pr-2192/next/architecture/components/runtime#contrast-image-puller">Contrast image puller</a> to be able to pull images from a private registry, it must be configured with the required authentication details.
Contrast uses its own <code>TOML</code>-based configuration format for this purpose.
This configuration must be provided as a secret<sup><a href="#user-content-fn-1" id="user-content-fnref-1" data-footnote-ref="true" aria-describedby="footnote-label" class="anchorTargetStickyNavbar_Vzrq">1</a></sup> to the <a class="" href="/contrast/pr-preview/pr-2192/next/architecture/components/runtime#node-installer-daemonset">node installer <code>DaemonSet</code></a>.
This secret must be named <code>contrast-node-installer-imagepuller-config</code> and belong to the <code>kube-system</code> namespace for the node installer to recognize and use it.
The node installer then handles installing the secret in the runtime directory on the host, from where the runtime then forwards it to the confidential pod VM, allowing the image puller to read it.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Since the image puller configuration is annotated to the pod, it can be retrieved by any role with <code>get</code> or <code>list</code> permission for pods.
This may result in an unexpected leak of sensitive information.</p></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="limitations">Limitations<a href="#limitations" class="hash-link" aria-label="Direct link to Limitations" title="Direct link to Limitations" translate="no">​</a></h4>
<p>Currently, it&#x27;s only possible to specify a single image puller auth configuration per runtime class, since only a single secret path can be configured for a runtime class.
Conversely, if this secret is present on a node, every node install will use it, granting deployments access to the configured registries.
This also extends to every newly installed runtime class.</p>
<p>Per default, all runtime classes use the same auth configuration, derived from the <code>contrast-node-installer-imagepuller-config</code> secret.
If you wish to use a different secret for a specific runtime class, you can change the <code>secretName</code> of the <code>DaemonSet</code> configuration in <code>runtime/runtime.yml</code> to a different name before applying the node installer, and put the image puller auth configuration into a secret with that name.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="creating-an-image-puller-configuration">Creating an image puller configuration<a href="#creating-an-image-puller-configuration" class="hash-link" aria-label="Direct link to Creating an image puller configuration" title="Direct link to Creating an image puller configuration" translate="no">​</a></h4>
<p>Various configuration options are available, both globally and per-registry.
The following table shows the available global configuration options.</p>
<table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>extra-env.HTTP_PROXY</code></td><td>proxy to use for plain HTTP requests</td></tr><tr><td><code>extra-env.HTTPS_PROXY</code></td><td>proxy to use for HTTPS requests</td></tr><tr><td><code>extra-env.NO_PROXY</code></td><td>registry domains for which the proxy should be bypassed</td></tr></tbody></table>
<p>Please see <a href="https://pkg.go.dev/golang.org/x/net/http/httpproxy#Config" target="_blank" rel="noopener noreferrer" class="">the Go <code>httpproxy</code> documentation</a> for details on the usage and semantics of these environment variables.</p>
<p>For each individual registry <code>registry.corp</code>, the following options are available under <code>registries.&quot;registry.corp.&quot;</code>:</p>
<table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>ca-certs</code></td><td>a newline-concatenated list of PEM-encoded certificates</td></tr><tr><td><code>insecure-skip-verify</code></td><td>disable transport security</td></tr><tr><td><code>auth</code></td><td>base64-encoded HTTP basic auth credentials authenticating the user with the registry</td></tr></tbody></table>
<p>The <code>auth</code> credentials use the same format as shown above for the Contrast CLI.
The following script generates a valid configuration file.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">registry</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&lt;put registry here&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">user</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&lt;put user id here&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">password</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;&lt;put client secret here&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;contrast-imagepuller.toml&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[registries]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">[registries.&quot;</span><span class="token string variable" style="color:#36acaa">$registry</span><span class="token string" style="color:#e3116c">.&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">auth = &quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable builtin class-name" style="color:#36acaa">printf</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable string" style="color:#e3116c">&quot;%s:%s&quot;</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable string" style="color:#e3116c">&quot;</span><span class="token string variable string variable" style="color:#36acaa">$user</span><span class="token string variable string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable string" style="color:#e3116c">&quot;</span><span class="token string variable string variable" style="color:#36acaa">$password</span><span class="token string variable string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable operator" style="color:#393A34">|</span><span class="token string variable" style="color:#36acaa"> base64 </span><span class="token string variable parameter variable" style="color:#36acaa">-w0</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre></div></div>
<p>The ability to specify CA certificates mainly serves two purposes, namely allowing connections to registries that aren&#x27;t publicly trusted in the web PKI,
and to restrict who can ostensibly intercept and log traffic for metadata analysis.</p>
<p>A number of example configurations for various use-case scenarios are shown below.</p>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-1">Example 1<a href="#example-1" class="hash-link" aria-label="Direct link to Example 1" title="Direct link to Example 1" translate="no">​</a></h5>
<p>In this scenario, there&#x27;s an internal registry at <code>registry.corp</code> for workload images, but <code>ghcr.io</code> is used for Contrast images.
The internal registry is served from within the corporate firewall, while access to external registries is mediated by a proxy.
Other registries are allowed, as long as they don&#x27;t require authentication.</p>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[extra-env]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HTTP_PROXY = &quot;https://proxy.corp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HTTPS_PROXY = &quot;https://proxy.corp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NO_PROXY = &quot;.corp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[registries.&quot;registry.corp.&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ca-certs = &#x27;&#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----BEGIN CERTIFICATE-----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MIIBezCCASGgAwIBAgIUUugBbePTzyVApU4DLSMmHnXXjcwwCgYIKoZIzj0EAwIw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EzERMA8GA1UEAwwIWW91ck5hbWUwHhcNMjUxMDIxMTUwNDI0WhcNMjYxMDIxMTUw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NDI0WjATMREwDwYDVQQDDAhZb3VyTmFtZTBZMBMGByqGSM49AgEGCCqGSM49AwEH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">A0IABIgsA5IEeiBq6jDpH2ttxrI96beeOqa+EpGqmznQmzpFkPEpLWMUt21Ien71</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rxdeFC7ySuuu95VPjSvO7EUM9qyjUzBRMB0GA1UdDgQWBBTVnuI2o36Mrja3RvwE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">82lWg2m19zAfBgNVHSMEGDAWgBTVnuI2o36Mrja3RvwE82lWg2m19zAPBgNVHRMB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Af8EBTADAQH/MAoGCCqGSM49BAMCA0gAMEUCIGmEkl8jxjxqyAxs3QoAXeIx++Bz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Zm9dwbeTbrKysrGXAiEA8ce6iyJUCZCZVVJs/HDLcPbOKc2EPZvdcGGjIlGXulo=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----END CERTIFICATE-----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;&#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[registries.&quot;ghcr.io.&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auth = &quot;YnVyZ2VyZGV2OnRoaXNpc25vdG15cGFzc3dvcmQ=&quot;</span><br></span></code></pre></div></div>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-2">Example 2<a href="#example-2" class="hash-link" aria-label="Direct link to Example 2" title="Direct link to Example 2" translate="no">​</a></h5>
<p>In this scenario, all container images are served from a public registry.
However, the image owner wants to make sure that the traffic can&#x27;t be intercepted by rogue CAs.
Other registries are strictly forbidden.</p>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[registries.&quot;very-secure.registri.es.&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auth = &quot;bmljZTp0cnk=&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ca-certs = &#x27;&#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Root CA 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----BEGIN CERTIFICATE-----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MIIBfDCCASGgAwIBAgIUU5G42y9bIh8+AU38qVOmKocc0CwwCgYIKoZIzj0EAwIw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EzERMA8GA1UEAwwIWW91ck5hbWUwHhcNMjUxMDIxMTUyNzEwWhcNMjYxMDIxMTUy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NzEwWjATMREwDwYDVQQDDAhZb3VyTmFtZTBZMBMGByqGSM49AgEGCCqGSM49AwEH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">A0IABOJlyBb/sHBmHRncTqk4lm6hBkBYlZGcScXfl/IuAVVIo4zCGBzCmvc7jYc2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+gyVp+wxuvm7NRza4e1QOfJfrxOjUzBRMB0GA1UdDgQWBBTRE8qju+GIWzr5xCik</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MdBJFOd1lzAfBgNVHSMEGDAWgBTRE8qju+GIWzr5xCikMdBJFOd1lzAPBgNVHRMB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Af8EBTADAQH/MAoGCCqGSM49BAMCA0kAMEYCIQCn+fVmAzB8HOakKGLx6oXF0WP0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GJibphhjfHPdNWEDdQIhAN3KFNWIYtE35+/rZb5I+oVKnqKS8igdIU9lXmpOps1j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----END CERTIFICATE-----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Root CA 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----BEGIN CERTIFICATE-----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MIIBezCCASGgAwIBAgIUUugBbePTzyVApU4DLSMmHnXXjcwwCgYIKoZIzj0EAwIw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EzERMA8GA1UEAwwIWW91ck5hbWUwHhcNMjUxMDIxMTUwNDI0WhcNMjYxMDIxMTUw</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NDI0WjATMREwDwYDVQQDDAhZb3VyTmFtZTBZMBMGByqGSM49AgEGCCqGSM49AwEH</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">A0IABIgsA5IEeiBq6jDpH2ttxrI96beeOqa+EpGqmznQmzpFkPEpLWMUt21Ien71</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rxdeFC7ySuuu95VPjSvO7EUM9qyjUzBRMB0GA1UdDgQWBBTVnuI2o36Mrja3RvwE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">82lWg2m19zAfBgNVHSMEGDAWgBTVnuI2o36Mrja3RvwE82lWg2m19zAPBgNVHRMB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Af8EBTADAQH/MAoGCCqGSM49BAMCA0gAMEUCIGmEkl8jxjxqyAxs3QoAXeIx++Bz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Zm9dwbeTbrKysrGXAiEA8ce6iyJUCZCZVVJs/HDLcPbOKc2EPZvdcGGjIlGXulo=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----END CERTIFICATE-----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;&#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[registries.&quot;.&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ca-certs = &quot;no PEM here means no CA certificates&quot;</span><br></span></code></pre></div></div>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-3">Example 3<a href="#example-3" class="hash-link" aria-label="Direct link to Example 3" title="Direct link to Example 3" translate="no">​</a></h5>
<p>In this scenario, there&#x27;s an HTTP-only registry deployed into the cluster for ease of use.
Transport security for this internal registry isn&#x27;t important to the operators.
Other registries should be used anonymously, but with TLS.</p>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[registries.&quot;registry.default.svc.cluster.local.&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">insecure-skip-verify = true</span><br></span></code></pre></div></div>
<h5 class="anchor anchorTargetStickyNavbar_Vzrq" id="example-4">Example 4<a href="#example-4" class="hash-link" aria-label="Direct link to Example 4" title="Direct link to Example 4" translate="no">​</a></h5>
<p>If no image puller configuration is provided or if it&#x27;s empty, the behavior for all registries is to use no authentication, and to use and trust web PKI.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="registry-matching-and-subdomains">Registry matching and subdomains<a href="#registry-matching-and-subdomains" class="hash-link" aria-label="Direct link to Registry matching and subdomains" title="Direct link to Registry matching and subdomains" translate="no">​</a></h4>
<p>Registry domains are specified as fully qualified domain names.
Note the trailing dot in the examples above.
For a registry-specific configuration to be applied to a pull request, the image&#x27;s registry must end exactly in the configuration&#x27;s name.
A configuration above for <code>registries.&quot;.registry.corp.&quot;</code> will be applied to any and all registries available on subdomains of <code>registry.corp</code>, but not to <code>registry.corp</code> itself.
Pulling the image <code>example.registry.corp/example/image@sha256:...</code> will use the configuration given under <code>registries.&quot;.registry.corp.&quot;</code>, but <code>registry.corp/example/image@sha256:...</code> won&#x27;t.</p>
<p>Additionally, <code>example.registry.corp</code> must be able to prove its identity by successfully completing a TLS handshake using one of the explicitly configured certificates.
If no certificates are configured, the hosts default web PKI certificates are used.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="multiple-matches-and-global-configuration">Multiple matches and global configuration<a href="#multiple-matches-and-global-configuration" class="hash-link" aria-label="Direct link to Multiple matches and global configuration" title="Direct link to Multiple matches and global configuration" translate="no">​</a></h4>
<p>If multiple matching registry configurations exist, for example if both <code>registries.&quot;.registry.corp.&quot;</code> and <code>registries.&quot;.corp.&quot;</code> have configuration values set, then the most specific match will be chosen.
In the example, this would be <code>registries.&quot;.registry.corp.&quot;</code>.</p>
<p>To specify a catch-all configuration, use the key <code>registries.&quot;.&quot;</code>.
The option <code>registries.&quot;.&quot;.ca-certs</code> can be used to disable authentication with all unknown registries:</p>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[registries.&quot;.&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ca-certs = &#x27;&#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">This option set, but no certificates provided, means no TLS handshake will succeed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&#x27;&#x27;&#x27;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="ip-addresses-and-ports">IP addresses and ports<a href="#ip-addresses-and-ports" class="hash-link" aria-label="Direct link to IP addresses and ports" title="Direct link to IP addresses and ports" translate="no">​</a></h4>
<p>Currently, IP- and port-based configuration isn&#x27;t supported.
Please use Kubernetes&#x27; built-in tools to assign unique domain names to IP addresses, and use these for image references instead.</p>
<!-- -->
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorTargetStickyNavbar_Vzrq sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes" translate="no">​</a></h2>
<ol>
<li class="anchorTargetStickyNavbar_Vzrq" id="user-content-fn-1">
<p>Kubernetes secrets are accessible to anyone with API access to the node, as well as anyone with access to <code>etcd</code> (<a href="https://kubernetes.io/docs/concepts/configuration/secret/" target="_blank" rel="noopener noreferrer" class="">source</a>).
Anyone with these permissions is additionally able to change the configuration&#x27;s content, with no way for Contrast to verify the integrity of the configuration eventually received by the image puller.</p>
<p>This allows an attacker to redirect image pull requests and configure an attacker-controlled registry to appear as legitimate.
The attacker could then, for example, log which images are being pulled.</p>
<p>This does <strong>not</strong> allow an attacker to serve malicious images or alter the contents of valid images, since irrespective of the image puller&#x27;s configuration,
pulled images are integrity-protected through their mandatory pinned digest. <a href="#user-content-fnref-1" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/edgelesssys/contrast/edit/main/docs/docs/howto/registry-authentication.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/contrast/pr-preview/pr-2192/next/howto/logging"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Logging</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/contrast/pr-preview/pr-2192/next/howto/observability"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Observability</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#applicability" class="table-of-contents__link toc-highlight">Applicability</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#how-to" class="table-of-contents__link toc-highlight">How-to</a><ul><li><a href="#contrast-cli" class="table-of-contents__link toc-highlight">Contrast CLI</a></li><li><a href="#confidential-guest-vms" class="table-of-contents__link toc-highlight">Confidential guest VMs</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.edgeless.systems/#footer-id" target="_blank" rel="noopener noreferrer" class="footer__link-item">Newsletter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.edgeless.systems/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/EdgelessSystems" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/edgeless-systems/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCOOInN0sCv6icUesisYIDeA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.edgeless.systems/imprint/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.edgeless.systems/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="javascript: Cookiebot.renew()" class="footer__link-item">Cookie Settings</a></li><li class="footer__item"><a href="https://www.edgeless.systems/contact-us/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Edgeless Systems</div></div></div></footer></div>
</body>
</html>