From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Charlotte Hartmann Paludo <git@charlotteharludo.com>
Date: Thu, 9 Oct 2025 13:05:36 +0200
Subject: [PATCH] agent: rewrite pgpu annotations to gpu

Signed-off-by: Charlotte Hartmann Paludo <git@charlotteharludo.com>
---
 src/agent/src/device/mod.rs | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/agent/src/device/mod.rs b/src/agent/src/device/mod.rs
index eb07e0b7774bd9ec5750c2d36bfcd8e335be6f38..a6cd57f988500c1acb20df52988e241765be847b 100644
--- a/src/agent/src/device/mod.rs
+++ b/src/agent/src/device/mod.rs
@@ -266,7 +266,8 @@ pub async fn handle_cdi_devices(
         }
     }
 
-    let (_, devices) = parse_annotations(spec.annotations().as_ref().unwrap())?;
+    let (_, mut devices) = parse_annotations(spec.annotations().as_ref().unwrap())?;
+    devices = devices.iter().map(|d| d.replace("/pgpu", "/gpu")).collect();
 
     if devices.is_empty() {
         info!(logger, "no CDI annotations, no devices to inject");
